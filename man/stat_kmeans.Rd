% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stat_kmeans.R
\name{stat_kmeans}
\alias{stat_kmeans}
\title{K-means clustering for morphometric data}
\usage{
stat_kmeans(data, formula = NULL, k = 3, nstart = 25, ...)
}
\arguments{
\item{data}{A tibble with coefficient columns}

\item{formula}{A formula specifying predictors. Can be:
\itemize{
\item Missing: auto-detects single coe column
\item Bare column name: \code{coe}
\item Formula: \code{~ coe}, \code{~ coe + size}, \code{~ coe1 + coe2}
\item Use \code{coe} in formula to auto-detect coefficient columns
}}

\item{k}{Integer. Number of clusters. Default is 3.}

\item{nstart}{Integer. Number of random starts for k-means. Default is 25.}

\item{...}{Additional arguments passed to \code{\link[stats:kmeans]{stats::kmeans()}}}
}
\value{
An object of class \code{c("stat_kmeans", "momstats")} containing:
\itemize{
\item \code{data}: Original tibble (unchanged)
\item \code{model}: The \code{\link[stats:kmeans]{stats::kmeans()}} object
\item \code{method}: "kmeans"
\item \code{call}: The function call
\item \code{formula}: Formula used (if any)
\item \code{predictor_cols}: All predictor column names
\item \code{k}: Number of clusters
\item \code{centers}: Cluster centers in predictor space (matrix)
\item \code{cluster_sizes}: Size of each cluster
\item \code{withinss}: Within-cluster sum of squares
\item \code{tot_withinss}: Total within-cluster sum of squares
\item \code{betweenss}: Between-cluster sum of squares
\item \code{variance_explained}: Proportion of variance explained by clustering
}
}
\description{
Perform k-means clustering on coefficient data.
}
\details{
\code{stat_kmeans()} provides a unified interface for k-means clustering on
morphometric coefficient data.
\subsection{Formula syntax}{

The formula specifies which predictors to use:
\itemize{
\item \code{~ coe}: Use auto-detected coefficient column(s)
\item \code{~ coe1 + coe2}: Use specific coefficient columns
\item \code{~ coe + size}: Coefficient column plus a covariate
\item Bare name or missing: auto-detect single coe column
}
}

\subsection{Getting results}{

Use \code{\link[=collect]{collect()}} to add cluster assignments to your data:

\if{html}{\out{<div class="sourceCode r">}}\preformatted{km <- boteft \%>\% stat_kmeans(k = 3)
boteft_clustered <- collect(km)  # Adds 'cluster' column
}\if{html}{\out{</div>}}

Use \code{\link[=transduce]{transduce()}} to get shapes at cluster centers:

\if{html}{\out{<div class="sourceCode r">}}\preformatted{center_shapes <- transduce(km, tibble(cluster = 1:3))
}\if{html}{\out{</div>}}
}
}
\examples{
\dontrun{
# Basic k-means with 3 clusters
km1 <- boteft \%>\% stat_kmeans(k = 3)

# More clusters
km2 <- boteft \%>\% stat_kmeans(k = 5)

# With covariate
km3 <- boteft \%>\% stat_kmeans(~ coe + length, k = 4)

# Add cluster assignments
boteft_clustered <- collect(km1)

# Get cluster center shapes
centers <- transduce(km1, tibble(cluster = 1:3))

# Plot results
plot(km1)  # Cluster visualization
plot(km1, color = type)  # Color by original grouping
}

}
\seealso{
\code{\link[stats:kmeans]{stats::kmeans()}}, \code{\link[=collect.stat_kmeans]{collect.stat_kmeans()}}, \code{\link[=plot.stat_kmeans]{plot.stat_kmeans()}}, \code{\link[=transduce.stat_kmeans]{transduce.stat_kmeans()}}
}
