% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stat_lda.R
\name{collect.stat_lda}
\alias{collect.stat_lda}
\title{Collect predictions and LD scores from LDA results}
\usage{
\method{collect}{stat_lda}(x, data = NULL, retain = FALSE, fold = FALSE, ...)
}
\arguments{
\item{x}{A \code{stat_lda} object}

\item{data}{A tibble. If NULL, uses the original data from the LDA.}

\item{retain}{How many LDs to retain:
\itemize{
\item \code{FALSE} (default): No LD scores, only predictions
\item \code{TRUE}: All LDs
\item Integer (e.g., \code{2}): First N LDs
\item Numeric 0-1 (e.g., \code{0.95}): LDs explaining this proportion of variance
}}

\item{fold}{How to add LD scores (only if retain != FALSE):
\itemize{
\item \code{FALSE} (default): Add as separate columns (\code{LD1}, \code{LD2}, ...)
\item \code{TRUE}: Fold into single list-column named \code{"lda"}
\item Character: Fold into single list-column with this name
}}

\item{...}{Additional arguments (reserved)}
}
\value{
A tibble with predictions added:
\itemize{
\item \code{pred}: Predicted class (factor)
\item \code{prob}: Posterior probability of predicted class (numeric)
\item \code{LD1}, \code{LD2}, ... : LD scores (if \code{retain} is not FALSE)
}
}
\description{
Extract predictions, posterior probabilities, and optionally LD scores from
an LDA result and add them to a tibble.
}
\details{
The function always adds cross-validated predictions (\code{pred}) and the
posterior probability of the predicted class (\code{prob}). These come from
leave-one-out cross-validation performed during model fitting.

Optionally, discriminant scores can be added via the \code{retain} parameter:
\itemize{
\item \code{retain = FALSE}: No LD scores (default, fastest)
\item \code{retain = TRUE}: All LD scores
\item \code{retain = 2}: First 2 LDs
\item \code{retain = 0.95}: LDs explaining 95\% of between-group variance
}

When \code{fold = TRUE} or a character name, LD scores are stored as a list-column
with class \code{c("lda", "coe")}, making them usable in downstream analyses.
}
\examples{
\dontrun{
lda <- boteft \%>\% stat_lda(type)

# Add predictions only (default)
collect(lda)

# Add predictions + all LD scores
collect(lda, retain = TRUE)

# Add predictions + first 2 LDs
collect(lda, retain = 2)

# Add predictions + LDs explaining 95\% variance
collect(lda, retain = 0.95)

# Fold LD scores into list-column
collect(lda, retain = 2, fold = TRUE)
collect(lda, retain = 2, fold = "lda_scores")
}

}
